<!DOCTYPE html>
<html>
<head>
  <title>Lofi Music Player</title>
  <script src="https://cdn.socket.io/4.3.1/socket.io.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <h1>Lofi Music Player</h1>

  <div id="player">
    <iframe id="youtube-player" width="560" height="315" src="https://www.youtube.com/embed/" frameborder="0" allowfullscreen></iframe>
  </div>

  <div id="controls">
    <button id="play">Play</button>
    <button id="pause">Pause</button>
    <button id="prev">Previous</button>
    <button id="next">Next</button>
  </div>

  <h2>History</h2>
  <ul id="history"></ul>

 <script>
    const socket = io();

    // Lắng nghe sự kiện phát nhạc
    socket.on('play', url => {
      $('#youtube-player').attr('src', url);
    });

    // Lắng nghe sự kiện tạm dừng phát nhạc
    socket.on('pause', () => {
      $('#youtube-player')[0].contentWindow.postMessage('{"event":"command","func":"' + 'pauseVideo' + '","args":""}', '*');
    });

    // Lắng nghe sự kiện tiếp tục phát nhạc
    socket.on('resume', () => {
      $('#youtube-player')[0].contentWindow.postMessage('{"event":"command","func":"' + 'playVideo' + '","args":""}', '*');
    });

    // Lắng nghe lịch sử phát bài hát
    socket.on('history', history => {
      const $history = $('#history');
      $history.empty();

      history.forEach(url => {
        const $li = $('<li></li>');
        const $a = $('<a href="' + url + '">' + url + '</a>');
        $li.append($a);
        $history.append($li);
      });
    });

    // Gửi yêu cầu phát nhạc
    $('#play').click(() => {
      const videoId = prompt('Enter YouTube Video ID:');
      socket.emit('play', videoId);
    });

    // Gửi yêu cầu tạm dừng phát nhạc
    $('#pause').click(() => {
      socket.emit('pause');
    });

    // Gửi yêu cầu tiếp tục phát nhạc
    $('#resume').click(() => {
      socket.emit('resume');
    });
  </script>
</body>
</html>